<!doctype html><html lang=fr-fr dir=ltr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes,viewport-fit=cover"><title>Apache2 et ssh, mini memo | Blog Iglou.eu</title>
<link rel=icon href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48dGV4dCB5PSIuOWVtIiBmb250LXNpemU9IjkwIj7wn5K+PC90ZXh0Pjwvc3ZnPg=="><link rel=canonical href=https://blog.iglou.eu/apache2-et-ssh-mini-memo/><meta itemprop=name content="Apache2 et ssh, mini memo"><meta itemprop=description content="Cet article est issu d‚Äôune importation historique.
Il fut fait sans correcteur orthographique et grammaticale, il est aussi fort probable que des images et liens soient indisponible. üôà Deb üôâ me üôä Il y a de cela 8mois, j‚Äôavais entam√© la configuration de mon nouveau serveur d√©di√© sous debian. Il y a peu, j‚Äôeus besoin de modifications tr√®s simples, mais pas moyen de me rappeler comment les effectuer. Profitons en pour realiser un memo qui me servira aussi dans le futur."><meta itemprop=datePublished content="2012-11-14T05:56:00+00:00"><meta itemprop=dateModified content="2013-08-06T16:07:32+00:00"><meta itemprop=wordCount content="442"><meta itemprop=keywords content="Serveur,Memo"><meta property="og:url" content="https://blog.iglou.eu/apache2-et-ssh-mini-memo/"><meta property="og:site_name" content="Blog Iglou.eu"><meta property="og:title" content="Apache2 et ssh, mini memo"><meta property="og:description" content="Cet article est issu d‚Äôune importation historique.
Il fut fait sans correcteur orthographique et grammaticale, il est aussi fort probable que des images et liens soient indisponible. üôà Deb üôâ me üôä Il y a de cela 8mois, j‚Äôavais entam√© la configuration de mon nouveau serveur d√©di√© sous debian. Il y a peu, j‚Äôeus besoin de modifications tr√®s simples, mais pas moyen de me rappeler comment les effectuer. Profitons en pour realiser un memo qui me servira aussi dans le futur."><meta property="og:locale" content="fr_fr"><meta property="og:type" content="article"><meta property="article:published_time" content="2012-11-14T05:56:00+00:00"><meta property="article:modified_time" content="2013-08-06T16:07:32+00:00"><meta property="article:tag" content="Serveur"><meta property="article:tag" content="Memo"><link href=https://blog.iglou.eu/index.xml rel=alternate type=application/rss+xml title="Blog Iglou.eu"><link rel=stylesheet href=/css/style.min.04f4b7997c4f8621b627767bda0b5f35702bcb14fff156b6c784df451dba02e0.css integrity="sha256-BPS3mXxPhiG2J3Z72gtfNXAryxT/8Va2x4TfRR26AuA=" crossorigin=anonymous></head><body><div class=toggle-widget id=open-left_panel><style>#open-left_panel .toggle-close{display:none}#open-left_panel:target~.content-main .left_panel{display:block;position:fixed;top:0;left:0;right:0;bottom:0;overflow:auto;z-index:10}#open-left_panel:target .toggle-icon-line{background-color:var(--color-wtoggle-line-focus)}#open-left_panel:target .toggle-icon-line.vertical{transform:rotate(360deg)}#open-left_panel:target .toggle-icon-line.horizontal{transform:rotate(180deg)}#open-left_panel:target .toggle-close{display:initial}#open-left_panel:target .toggle-open{display:none}</style><div class=toggle-icon><span class="toggle-icon-line vertical"></span>
<span class="toggle-icon-line horizontal"></span></div><a class="toggle-open toggle-link" title="Ouvrir Left panel" href=#open-left_panel></a><a class="toggle-close toggle-link" title="Fermer Left panel" href=#close-left_panel></a></div><header class=site-header><h1>Blog Iglou.eu</h1><nav class=main-menu><ul><li><a href=/>Accueil</a></li></ul></nav></header><main class=content-main><div class=top_panel><aside class=article-info><span class=date-info>Le <time class=published datetime=2012-11-14T05:56:00Z>14 Nov 2012
</time>¬∑ Maj le <time class=editited datetime=2013-08-06T16:07:32Z>06 Aug 2013
</time></span><span class=spacer></span>
<span class=reading-time>2-3 minutes</span></aside></div><div class=left_panel><aside class=sidebar><div class=toc><h2 class=toc-title>Table des Mati√®res</h2><nav id=TableOfContents><ul><li><a href=#-deb--me->üôà Deb üôâ me üôä</a><ul><li><a href=#compiler-apache>Compiler Apache</a></li><li><a href=#apache2conf>apache2.conf</a></li><li><a href=#d√©sactiver-lauto-index>D√©sactiver l‚Äôauto-index</a></li><li><a href=#s√©curiser-ssh>S√©curiser ssh</a></li></ul></li></ul><ul><li><ul><li><a href=#d√©finir-la-page-dindex>D√©finir la page d&rsquo;index</a></li><li><a href=#g√©rer-les-virtual-host>G√©rer les virtual host</a></li></ul></li></ul></nav></div><div class=tags><h2 class=tags-title>Tags</h2><ul class=tags-list><li class=tags-item><a class=tags-link href=https://blog.iglou.eu/tags/serveur/>Serveur</a></li><li class=tags-item><a class=tags-link href=https://blog.iglou.eu/tags/memo/>Memo</a></li></ul></div></aside></div><div class=right_panel><article class="blog-article markdown"><div class="box warning monospace"><span>Cet article est issu d&rsquo;une importation historique.<br>Il fut fait sans correcteur orthographique et grammaticale, il est aussi fort probable que des images et liens soient indisponible.</span></div><h2 id=-deb--me->üôà Deb üôâ me üôä</h2><p>Il y a de cela 8mois, j&rsquo;avais entam√© la configuration de mon nouveau serveur d√©di√© sous debian. Il y a peu, j&rsquo;eus besoin de modifications tr√®s simples, mais pas moyen de me rappeler comment les effectuer. Profitons en pour realiser un memo qui me servira aussi dans le futur.</p><p></p><figure class=article-img><a href=/images/www.lafermeduweb.net-images-billets-2009-01-debian_topBillet.png target=_blank title="Ouvrir l'image dans un onglet"><img src=/images/www.lafermeduweb.net-images-billets-2009-01-debian_topBillet.png alt="Image de presentation" referrerpolicy=no-referrer loading=lazy class=img-src></a></figure><p></p><h3 id=compiler-apache>Compiler Apache</h3><p>A la compilation d&rsquo;apache j&rsquo;ajoute quelques options</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>./configure -enable-modules<span style=color:#f92672>=</span>all --with-included-apr --with-mpm<span style=color:#f92672>=</span>event --enable-rewrite --enable-headers --enable-deflate --enable-fcgid¬†
</span></span><span style=display:flex><span>make
</span></span><span style=display:flex><span>sudo make install
</span></span></code></pre></div><h3 id=apache2conf>apache2.conf</h3><pre tabindex=0><code class=language-conf data-lang=conf>AddHandler fcgid-script .php
FCGIWrapper /usr/lib/cgi-bin/php5 .php
Options ExecCGI
</code></pre><h3 id=d√©sactiver-lauto-index>D√©sactiver l‚Äôauto-index</h3><p>Le d√©sactiver de fa√ßons g√©n√©ral dans apache2</p><pre tabindex=0><code>sudo a2dismod autoindex
</code></pre><p>&ldquo;a2dismod&rdquo; est la commande pour d√©sactiver un mod, pour le r√©activer il faut utiliser &ldquo;a2enmod&rdquo;. Il faut ensuite restart apache</p><ul><li>¬†/etc/init.d/apache2 restart</li></ul><p>Le d√©sactiver dans une racine virtual host.</p><ul><li>nano .htaccess</li><li><em>ajouter</em> Options -Indexes</li></ul><h3 id=s√©curiser-ssh>S√©curiser ssh</h3><p><strong>Changer le port (par d√©faut, port 22)</strong></p><p>On v√©rifie si le port que l&rsquo;on veux pour ssh est utilis√©, ici le port 4012.</p><ul><li><h1 id=netstat--tulnp--grep-4012>netstat -tulnp | grep 4012</h1></li></ul><p>Puis modifier le port.</p><ul><li><h1 id=nano-etcsshsshd_config>nano /etc/ssh/sshd_config</h1></li></ul><p><strong>Contr√¥le Des login</strong> s</p><p>On ouvre le fichier de configuration o√π l&rsquo;on ajouteras les options.</p><ul><li><h1 id=nano-etcsshsshd_config-1>nano /etc/ssh/sshd_config</h1></li></ul><p>Pour limiter les tentatives de connection au user autoris√©.</p><ul><li>AllowUsers toto tata</li></ul><p>Desactiver root et n&rsquo;utiliser que &ldquo;su&rdquo; est tr√®s important.</p><ul><li>PermitRootLogin no</li></ul><p>Par d√©faut &ldquo;PermitEmptyPasswords no&rdquo; et le protocole ssh2 devrait √™tres d√©fini correctement. Reload de ssh.</p><ul><li><h1 id=etcinitdssh-restart>/etc/init.d/ssh restart</h1></li></ul><h3 id=d√©finir-la-page-dindex>D√©finir la page d&rsquo;index</h3><p>Il peut arriver que l&rsquo;on ne veuille pas utiliser la traditionnelle page index.* comme accueil par d√©faut. Dans ce cas je vous conseil de ne pas modifier ceci directement dans la conf de apache, mais dans un .htaccess a la racine du virtual host cibl√©.</p><ul><li>$ nano .htaccess</li><li>DirectoryIndex monindexperso.ty</li></ul><h3 id=g√©rer-les-virtual-host>G√©rer les virtual host</h3><p>Pour cr√©er un host, il suffit d&rsquo;un simple fichier de conf dans sites-available. Il existe d√©j√† un exemple qu&rsquo;il suffit de copier.</p><ul><li><h1 id=cd-etcapache2sites-available>cd /etc/apache2/sites-available</h1></li><li><h1 id=cp-default-monsitedeblabla>cp default monsitedeblabla</h1></li></ul><p>Il n&rsquo;y a plus qu&rsquo;a √©diter ce fichier pour notre host, l&rsquo;activer et red√©marrer apache.</p><ul><li><h1 id=nano-monsitedeblabla>nano monsitedeblabla</h1></li><li><h1 id=a2ensite-monsitedeblabla>a2ensite monsitedeblabla</h1></li><li><h1 id=apache2ctl-restart>apache2ctl restart</h1></li></ul><p>Le fichier de conf pas d√©faut est &ldquo;compliqu√©&rdquo; pour rien, il est possible d&rsquo;avoir son host en 3lignes (bien qu&rsquo;il manque des options). Pour d√©sactiver un site utilisez a2dissite, vous pouvez le supprimer en suite de sites-available ou le garder pour plus tard. Si vous n&rsquo;acc√©der pas au bon r√©pertoire c&rsquo;est la ligne &ldquo;RedirectMatch ^/$ /apache2-default/&rdquo; qui est pr√©sente dans la conf du host. A commenter ou supprimer &mldr;</p><p>Mettre en place un firewall, ou un script d&rsquo;intrusion n&rsquo;est pas une mauvaise id√©e.</p><p><strong>√©a, les amis.</strong></p></article></div></main><footer class=site-footer><p>Copyright 2024 CC0 - Sans Cookies ni tracking</p></footer></body></html>