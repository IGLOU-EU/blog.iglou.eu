<!doctype html><html lang=fr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes,viewport-fit=cover"><title>Heltec e-ink 1.54" avec Arduino UNO | Blog Iglou.eu</title><meta property="og:title" content="Heltec e-ink 1.54&#34; avec Arduino UNO | Blog Iglou.eu"><meta property="og:locale" content="fr_fr"><meta name=theme-color content="#dbf3f4"><meta name=author content="Adrien K"><meta name=description content="La base pour utiliser cet Ã©cran e-ink EDIT: Vous allez rire, j&amp;rsquo;ai passÃ© deux jours Ã  chercher de la doc pour cet Ã©cran. Puis en rÃ©digeant cet article, j&amp;rsquo;ai remarquÃ© qu&amp;rsquo;elle Ã©tait disponible sur le site du constructeurâ€¦ et est dÃ» rÃ©diger Ã  nouveau cet article, et retirant pleinnnnnn d&amp;rsquo;indicationsâ€¦ C&amp;rsquo;est du boulot dâ€™Ãªtre con.

Qu&amp;rsquo;il est beau !   
Heltec 1.54&amp;quot; e-ink Il Ã©tait une fois, un petit malin."><meta property="og:type" content="article"><meta property="og:description" content="La base pour utiliser cet Ã©cran e-ink EDIT: Vous allez rire, j&amp;rsquo;ai passÃ© deux jours Ã  chercher de la doc pour cet Ã©cran. Puis en rÃ©digeant cet article, j&amp;rsquo;ai remarquÃ© qu&amp;rsquo;elle Ã©tait disponible sur le site du constructeurâ€¦ et est dÃ» rÃ©diger Ã  nouveau cet article, et retirant pleinnnnnn d&amp;rsquo;indicationsâ€¦ C&amp;rsquo;est du boulot dâ€™Ãªtre con.

Qu&amp;rsquo;il est beau !   
Heltec 1.54&amp;quot; e-ink Il Ã©tait une fois, un petit malin."><meta property="og:publish_date" name=publish_date content="2019-03-18T13:17:00Z"><meta property="article:published_time" content="2019-03-18T13:17:00Z"><meta property="article:modified_time" content="2022-04-03T13:54:16+02:00"><meta property="article:author" content="Adrien K"><meta property="article:tag" content="hardware programmation"><meta property="og:site_name" content="Blog Iglou.eu"><meta property="og:type" content="blog"><link rel=icon href="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Ctext y=%22.9em%22 font-size=%2290%22%3E%F0%9F%92%BE%3C/text%3E%3C/svg%3E"><link rel=canonical href=https://blog.iglou.eu/heltec-e-ink-154-avec-arduino-uno/><meta property="og:url" content="https://blog.iglou.eu/heltec-e-ink-154-avec-arduino-uno/"><style>:root{--c-dark:#33331a;--c-light:#dbf3f4;--c-primary:var(--c-light);--c-secondary:var(--c-dark);--ff-monospace:'Roboto Mono', SFMono-Regular, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;--ff-sans-serif:'Roboto', "Segoe UI", "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif}pre,code{--c-secondary:var(--c-light);--c-primary:var(--c-dark)}.btn:hover,.btn:focus{--c-primary:var(--c-dark);--c-secondary:var(--c-light)}*,::after,::before{box-sizing:border-box}.link.inherit{color:inherit}.link.important{color:var(--c-primary);border:.1em dotted transparent;padding:.25em .5em;text-decoration:underline double .05em}.link.important:hover,.link.important:focus{border-color:var(--c-primary);text-decoration:underline .1em}.link.svg{line-height:0;text-decoration:none}.link.svg>svg{fill:var(--c-primary);height:2em}.btn{color:var(--c-primary);border:.1em solid;padding:.25em .5em;display:inline-block;text-decoration:none;background-color:var(--c-secondary)}.intext{font-size:inherit;display:inline}.monospace{font-family:var(--ff-monospace)}.capitalize{text-transform:capitalize}.right{text-align:right}.center{text-align:center}.m0{margin:0}.emoji{color:transparent;text-shadow:0 0 0 var(--c-primary)}.hr{margin:1em 0;border:none;border-bottom:.1em solid var(--c-primary)}.infos,.ariane{padding:.25em .5em;font-weight:700}.infos{gap:.5em;display:grid;margin-top:.5em;margin-bottom:.5em;grid-template-columns:1fr auto}.ariane{border:.1em solid var(--c-primary);border-left:none;border-right:none}body{color:var(--c-primary);font-size:1.2rem;line-height:1.4rem;font-family:var(--ff-sans-serif);background-color:var(--c-secondary);max-width:70em;margin:auto}.article h2::after{content:"";display:block;width:60%;height:1px;background-color:var(--c-primary);margin-top:.15em}pre{color:var(--c-primary);padding:1em;overflow:auto;max-height:100vh;background:var(--c-secondary)}code:not([data-lang]){color:var(--c-primary);background:var(--c-secondary);font-family:var(--ff-monospace);border-radius:3px}.site_title{font-size:3em;text-align:center;line-height:initial;text-shadow:0 0 1px var(--c-primary),0 0 1px var(--c-primary)}.article{margin:1em auto;max-width:80rem}.article_content__img{width:30em;color:var(--c-secondary);cursor:pointer;padding:1em;max-width:100%;text-align:center;font-style:italic;font-weight:700;background-color:var(--c-primary)}.article_content__img_src,.article_content__img:focus{width:100%}.article_content__img_src{max-height:50vh;object-fit:contain}.article_content__img:focus .article_content__img_src{max-height:100vh}.article_comm{margin-top:2em}.main.branch{display:grid;line-height:1.5em;grid-template-columns:minmax(25em,2fr)minmax(10em,1fr)}.articles{width:fit-content;margin:auto}.article_link{border:.1em solid var(--c-primary);margin:1em 0;padding:1.5em;max-width:50em;font-weight:700}.article_link__header,.article_link__footer{gap:1em;display:grid}.article_link__header{margin-bottom:1.5em;grid-template-columns:minmax(15rem,1fr)1fr}.article_link__footer{margin-top:2em;grid-template-columns:1fr auto}.article_link__title>.link{line-height:1.25em;text-decoration:underline .1em transparent}.article_link__title>.link:hover,.article_link__title>.link:focus{text-decoration-color:var(--c-primary)}.paginator{font-size:1.25em;text-align:center}.author{color:var(--c-primary);width:fit-content;margin:1em auto;height:fit-content;padding:0 1em 1em;max-width:20em;background-color:var(--c-secondary)}.author_view{border-radius:1em;width:100%}.author_desc__name{margin-bottom:.25em}.author_social{display:flex;justify-content:space-between}@media(max-width:768px){body{font-size:1rem}.site_title{font-size:1.8em}.main.branch{display:block}.author{max-width:initial}.author_view{max-width:20em}.infos{display:block}.infos>span{padding:0 .15em;border-style:solid;border-width:0 0 0 1px}.article_content__img{margin:auto}.article{margin:1em .15em}.article_comm .btn{margin:.25em}}</style></head><body><header><h1 class="site_title monospace"><a href=/ class="link inherit">Blog.Iglou.eu</a></h1><div class="ariane monospace">/&#8239;<a href=/ class="link inherit">Home</a>&#8239;/&#8239;<h2 class="intext capitalize">Heltec e-ink 1.54" avec Arduino UNO</h2></div><aside class="infos monospace"><span class=infos_by>Par Adrien K</span>
<span class="infos_date right">Le <time class="article_link__date_format text_neon blue" datetime=2019-03-18T13:17:00Z>18 Mar 2019</time>
Â· Maj le <time class="article_link__date_format text_neon blue" datetime=2022-04-03T13:54:16+02:00>03 Apr 2022</time></span>
<span class=infos_time>Lecture 3 minutes</span>
<span class="infos_tags capitalize right"><a class="article_link__tag link important hardware" href=/tags/hardware/>hardware</a>
<a class="article_link__tag link important programmation" href=/tags/programmation/>programmation</a></span></aside></header><main class=main><article class=article><h2 id=la-base-pour-utiliser-cet-Ã©cran-e-ink>La base pour utiliser cet Ã©cran e-ink</h2><p><em><strong>EDIT:</strong> Vous allez rire, j&rsquo;ai passÃ© deux jours Ã  chercher de la doc pour cet Ã©cran. Puis en rÃ©digeant cet article, j&rsquo;ai remarquÃ© qu&rsquo;elle Ã©tait disponible sur le site du constructeurâ€¦ et est dÃ» rÃ©diger Ã  nouveau cet article, et retirant pleinnnnnn d&rsquo;indicationsâ€¦ C&rsquo;est du boulot dâ€™Ãªtre con.</em></p><p></p><figure class=article_content__img tabindex=0><img src=/images/4.bp.blogspot.com-mWhQoubCNE0-XI9f2kthPmI-AAAAAAAAA2A-uEWIut-TtYdYi-W7DZ1x-H8GGumvSsMgCLcBGAs-s640-IMG_20190318_100636.jpg alt="Image de presentation" referrerpolicy=no-referrer loading=lazy class=article_content__img_src><figcaption class=article_content__img_desc>Qu&rsquo;il est beau !</figcaption></figure><p></p><h3 id=_heltec-154-e-ink_><em>Heltec 1.54" e-ink</em></h3><p><strong>I</strong>l Ã©tait une fois, un petit malin. Il pensait que lâ€™Ã©cran e-ink le moins cher et le moins connu de son site chinois Ã©tait le meilleur choixâ€¦ Vous savez quoi ? Il avait tort.</p><p>Heureusement parmi les commentaires du produit, une personne a eu la bonne idÃ©e de citer la lib qu&rsquo;il utilisait (merci Ã  lui &mldr;). Il indiquait aussi que la lib officiel ne fonctionnait pas bien (sans blague).</p><p>La lib compatible est ðŸŽŠ EPD Waveshare 1.54 ðŸŽ‰, en plus elle est disponible dans le lib manager de l&rsquo;IDE Arduino.</p><p><a href="http://www.heltec.cn/project/1-54-inch-e-ink-screen/?lang=en" class="article_content__link link inherit" rel="noreferrer nofollow noopener">Lien officiel du produit</a></p><p><a href=https://drive.google.com/file/d/1cxx3VWmvgyAFA6MwDRLmr0n2f8Gkta9O/view class="article_content__link link inherit" rel="noreferrer nofollow noopener">Lien officiel de la documentation + sources</a></p><p>Infos du produit compatible de chez waveshare (Probablement la mÃªme base):</p><ul><li><a href=https://www.waveshare.com/w/upload/7/77/1.54inch_e-Paper_Datasheet.pdf class="article_content__link link inherit" rel="noreferrer nofollow noopener">E-Paper DataSheet.pdf</a></li><li><a href=https://www.waveshare.com/w/upload/7/7f/1.54inch_e-paper_module_user_manual_en.pdf class="article_content__link link inherit" rel="noreferrer nofollow noopener">E-Paper module user manual.pdf</a></li><li><a href=https://www.waveshare.com/wiki/File:1.54inch_e-Paper_Module_code.7z class="article_content__link link inherit" rel="noreferrer nofollow noopener">Code exemple.7z</a></li><li><a href=https://wavesharejfs.blogspot.com/2018/08/make-new-larger-font-for-waveshare-spi.html class="article_content__link link inherit" rel="noreferrer nofollow noopener">Tuto pour la crÃ©ation d&rsquo;une font</a></li></ul><h3 id=time-for-action->Time for action !</h3><p></p><figure class=article_content__img tabindex=0><img src=/images/2.bp.blogspot.com-H8fjOnsOpJM-XI9mLOtjHfI-AAAAAAAAA2M-J2i-Mjsuk2kA4C_XhL5MNCF4CzasVCAAwCLcBGAs-s640-Arduino-uno.png alt="Image de presentation" referrerpolicy=no-referrer loading=lazy class=article_content__img_src><figcaption class=article_content__img_desc>Un Arduino UNO classique, avec ses broches.</figcaption></figure><p></p><p>Le constructeur du nÃ´tre Ã©cran, bien qu&rsquo;un peu Ã  cran (Ã  non Ã§a, c&rsquo;est moi) &mldr; fournis la liste des pins. C&rsquo;est sympa Ã§a. Attention les Ã©pines, Ã§a pique, alors il ne faut pas se tromper.</p><p></p><figure class=article_content__img tabindex=0><img src=/images/scr_111606.png alt="Image de presentation" referrerpolicy=no-referrer loading=lazy class=article_content__img_src><figcaption class=article_content__img_desc>SDI = MOSI = D11; CLK = SCK = D13VCC Ã  connecter sur 3.3v et GND &mldr; ba sur GND !</figcaption></figure><p></p><p>La lib de Waveshare, donne l&rsquo;utilisation des pins <strong>reset</strong> et <strong>busy</strong>, mais elle ne sont pas disponible sur notre Ã©cran et totalement optionnel.</p><p>Le code d&rsquo;exemple est relativement parlant, il n&rsquo;y a donc rien Ã  ajouter sur ce point. Si vous avez besoin de la liste des fonctions, ne regardez pas dans le .h, les commentaires Ã©tant dans le .cpp &mldr;</p><h3 id=bon-Ã -savoir->Bon Ã  savoir !</h3><p>Il y a deux zones mÃ©moires. Par ex, pour afficher une image de fond et un texte, il faut charger les deux zones avec &lsquo;setFrameMemory&rsquo; puis les afficher &lsquo;displayFrame&rsquo;.</p><p>Pour afficher plusieurs zones, il faut dÃ©finir une zone Ã  Ã©diter avec &lsquo;setWidth et setHeight&rsquo;, puis &lsquo;clear&rsquo; cette zone avant d&rsquo;y Ã©crire.</p><p>Il n&rsquo;est pas possible d&rsquo;utiliser de larges zones Ã  Ã©diter, l&rsquo;atmega de notre Arduino n&rsquo;ayant que 2048Bytes de ram, 1Byte = 8pixel. Il y a 40k pixel sur cet Ã©cran, sÃ©lectionner tout lâ€™Ã©cran prendrait 5000Bytes.</p><p>Il y a un bon exemple d&rsquo;utilisation d&rsquo;image dans la lib de chez waveshare, il faut juste garder en tÃªte que l&rsquo;image est en N&B et exprimÃ© en hexadÃ©cimal. Vous pouvez utiliser <a href=http://www.digole.com/tools/PicturetoC_Hex_converter.php class="article_content__link link inherit" rel="noreferrer nofollow noopener">cet outil en ligne</a> au besoin.</p><p>Tout call a &lsquo;displayFrame&rsquo;, devrait, semble-t-il, Ãªtre prÃ©cÃ©dÃ© d&rsquo;une attente de 300ms</p><p><strong>Ã©a, les amis.</strong></p><p>PS: Dans cet article, il y a probablement pleins dâ€™imprÃ©cisions et d&rsquo;erreur, du fait que je dÃ©couvre tout juste la techno. Nâ€™hÃ©sitez pas Ã  corriger <strong>;)</strong></p><aside class="article_comm right"><a class="article_comm__email btn inherit right monospace" href="mailto:adrien@iglou.eu?subject=%5BCommentaire%5D+Heltec%20e-ink%201.54%22%20avec%20Arduino%20UNO&body=Bonjour%20Adrien%2C%0D%0A">M'envoyer un commentaire</a>
Â·
<a class="article_comm__issue btn inherit right monospace" href="https://github.com/IGLOU-EU/blog.iglou.eu/issues/new?title=Erreur:+Heltec%20e-ink%201.54%22%20avec%20Arduino%20UNO&body=Lien:+https%3a%2f%2fblog.iglou.eu%2fheltec-e-ink-154-avec-arduino-uno%2f%0A%0AMince+quel+est+mon+erreur+?%0A">Reporter une erreur</a></aside></article></main><footer><hr class=hr><p class="footer monospace center">Site et contenue sous CC0 - Iconographie par Font Awesome - Sans Cookies ni tracking</p></footer></body></html>